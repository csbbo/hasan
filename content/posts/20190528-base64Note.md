---
title: "Base64笔记"
date: 2019-05-28T20:01:40+08:00
tags: ["Base64"]
---

Base64是一种基于64个可打印字符来表示二进制数据的表示方法。常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据，包括MIME的电子邮件及XML的一些复杂数据。

> 所谓Base64，就是说选出64个字符小写字母a-z、大写字母A-Z、数字0-9、符号"+"、"/"（再加上作为垫字的"="，实际上是65个字符）作为一个基本字符集。然后，其他所有符号都转换成这个字符集中的字符。

具体来说，转换方式可以分为四步:  
1.将每三个字节作为一组，一共是24个二进制位。  
2.将这24个二进制位分为四组，每个组有6个二进制位。  
3.在每组前面加两个00，扩展成32个二进制位，即四个字节。  
4.根据下表，得到扩展后的每个字节的对应符号，这就是Base64的编码值。  

<!--more-->


Base64索引表:

数值 | 字符 | 数值 | 字符 | 数值 | 字符 | 数值 | 字符
:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:
0|	A|	16|	Q|	32|	g|	48|	w
1|	B|	17|	R|	33|	h|	49|	x
2|	C|	18|	S|	34|	i|	50|	y
3|	D|	19|	T|	35|	j|	51|	z
4|	E|	20|	U|	36|	k|	52|	0
5|	F|	21|	V|	37|	l|	53|	1
6|	G|	22|	W|	38|	m|	54|	2
7|	H|	23|	X|	39|	n|	55|	3
8|	I|	24|	Y|	40|	o|	56|	4
9|	J|	25|	Z|	41|	p|	57|	5
10|	K|	26|	a|	42|	q|	58|	6
11|	L|	27|	b|	43|	r|	59|	7
12|	M|	28|	c|	44|	s|	60|	8
13|	N|	29|	d|	45|	t|	61|	9
14|	O|	30|	e|	46|	u|	62|	+
15|	P|	31|	f|	47|	v|	63|	/

Base64将三个字节转化成四个字节，因此Base64编码后的文本，为原来4/3。

> 举一个具体的实例，演示英语单词Man如何转成Base64编码。

<table>
<tbody><tr>
<th scope="row">文本
</th>
<td colspan="8" align="center"><b>M</b>
</td>
<td colspan="8" align="center"><b>a</b>
</td>
<td colspan="8" align="center"><b>n</b>
</td></tr>
<tr>
<th scope="row">ASCII编码
</th>
<td colspan="8" align="center">77
</td>
<td colspan="8" align="center">97
</td>
<td colspan="8" align="center">110
</td></tr>
<tr>
<th scope="row">二进制位
</th>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0
</td></tr>
<tr>
<th scope="row">索引
</th>
<td colspan="6" align="center">19
</td>
<td colspan="6" align="center">22
</td>
<td colspan="6" align="center">5
</td>
<td colspan="6" align="center">46
</td></tr>
<tr>
<th scope="row">Base64编码
</th>
<td colspan="6" align="center"><b>T</b>
</td>
<td colspan="6" align="center"><b>W</b>
</td>
<td colspan="6" align="center"><b>F</b>
</td>
<td colspan="6" align="center"><b>u</b>
</td></tr></tbody>
</table>

第一步，"M"、"a"、"n"的ASCII值分别是77、97、110，对应的二进制值是01001101、01100001、01101110，将它们连成一个24位的二进制字符串010011010110000101101110。

第二步，将这个24位的二进制字符串分成4组，每组6个二进制位：010011、010110、000101、101110。

第三步，在每组前面加两个00，扩展成32个二进制位，即四个字节：00010011、00010110、00000101、00101110。它们的十进制值分别是19、22、5、46。

第四步，根据上表，得到每个值对应Base64编码，即T、W、F、u。

因此，Man的Base64编码就是TWFu。

> 如果字节数不足三

1.**二个字节的情况**：将这二个字节的一共16个二进制位，按照上面的规则，转成三组，最后一组除了前面加两个0以外，后面也要加两个0。这样得到一个三位的Base64编码，再在末尾补上一个"="号。  
比如，"Ma"这个字符串是两个字节，可以转化成三组00010011、00010110、00010000以后，对应Base64值分别为T、W、E，再补上一个"="号，因此"Ma"的Base64编码就是TWE=。

2.**一个字节的情况**：将这一个字节的8个二进制位，按照上面的规则转成二组，最后一组除了前面加二个0以外，后面再加4个0。这样得到一个二位的Base64编码，再在末尾补上两个"="号。  
比如，"M"这个字母是一个字节，可以转化为二组00010011、00010000，对应的Base64值分别为T、Q，再补上二个"="号，因此"M"的Base64编码就是TQ==。

> 那汉字如何进行Base64编码，举一个中文的例子，汉字"严"如何转化成Base64编码？

这里需要注意，汉字本身可以有多种编码，比如gb2312、utf-8、gbk等等，每一种编码的Base64对应值都不一样。下面的例子以utf-8为例。  
首先，"严"的utf-8编码为E4B8A5，写成二进制就是三字节的"11100100 10111000 10100101"。将这个24位的二进制字符串，按照第3节中的规则，转换成四组一共32位的二进制值"00111001 00001011 00100010 00100101"，相应的十进制数为57、11、34、37，它们对应的Base64值就为5、L、i、l。  
所以，汉字"严"（utf-8编码）的Base64值就是5Lil。